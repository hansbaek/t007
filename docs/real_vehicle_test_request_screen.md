# 실차시험 의뢰 화면 구성 제안서

## 1. 배경
- **의뢰 방향과 실제 평가 순서 불일치**: 조합평가 의뢰 시 개발자가 설계한 Test Order와 실제 평가 파트가 수행하는 순서가 서로 달라 혼선이 발생하고 있다.
- **시스템 정보 불일치 가능성**: 시스템에 입력된 타이어 정보와 평가 결과 정보가 정확히 매칭되지 않아, 빅데이터 축적 시 오류 가능성이 존재한다.

## 2. 목적
1. 정확한 Test Order 기반으로 평가 플랜을 수립하고 진행 상황을 예측할 수 있도록 한다.
2. 시스템에 입력된 타이어 정보와 평가에서 사용된 탕어 정보의 일치성을 확보한다.
3. 의뢰 단계에서 조합평가 정보 입력 오류를 방지한다.

## 3. 화면 구성 개요
화면은 **의뢰 파트**, **평가 파트**, **결과 입력 파트**의 세 영역으로 나누고, 각 영역이 순차적으로 연결되도록 구성한다.

```
┌────────────────────────────────────────────────────────────────────────────┐
│ 헤더: 의뢰 정보 요약 (프로젝트, 요청자, 일정 등)                           │
├────────────────────────────────────────────────────────────────────────────┤
│ 1. 의뢰 파트                                                                │
│    ├─ 1-1. 시험용 Spec 정의 / 타이어 번호 매기기                            │
│    ├─ 1-2. 조합별 Test Order 생성                                           │
│    └─ 1-3. 의뢰서 미리보기/출력                                             │
├────────────────────────────────────────────────────────────────────────────┤
│ 2. 평가 파트                                                                │
│    ├─ 2-1. 평가 시트 관리                                                   │
│    └─ 2-2. Parsing & Set 수량 관리                                          │
├────────────────────────────────────────────────────────────────────────────┤
│ 3. 결과 입력 파트                                                           │
│    ├─ 3-1. 결과 파일 업로드                                                 │
│    └─ 3-2. Test Order 매핑 & 취소 항목 처리                                 │
└────────────────────────────────────────────────────────────────────────────┘
```

## 4. 상세 기능 요구사항

### 4.1 의뢰 파트
#### 4.1.1 시험용 Spec 정의 및 타이어 번호 매기기
- 시험용 Spec에 대해 **Front/Rear Matrix 자동 생성** 기능을 제공한다.
- Spec Code(예: Front A/B/C/D, Rear a/b/c/d)를 등록하고, **사용자 정의 명명 규칙**을 지원한다.
- 동일 Spec의 중복 선택을 허용하여 `T1: A-a`, `T2: A-b`, `T3: A-c`와 같이 여러 Test Order에서 동일 Spec을 사용할 수 있도록 한다.
- Spec 등록 단계에서 제조, 가류 조건, 카빙, 버핑 등 추가 속성을 입력할 수 있도록 확장 필드를 마련한다.

#### 4.1.2 조합별 Test Order 생성
- Front/Rear Spec을 조합하여 Test Order를 생성하는 **매트릭스 UI** 제공.
- 생성된 조합은 리스트 형태로 저장하며, 순서 변경(Drag & Drop)과 삭제/복구 기능을 제공한다.
- 각 Test Order에 예상 평가 일정, 필요 수량 등 메타 정보를 입력할 수 있다.

#### 4.1.3 의뢰서 개선
- 조합으로 생성된 Test Order를 기반으로 **자동 의뢰서 양식**을 생성한다.
- 의뢰서는 Front/Rear Spec 정보와 Spec Code를 명확히 표기하며, PDF/Excel 출력 기능을 제공한다.
- 의뢰서에는 조합별 평가 목적, 주행 조건 등 참고 정보를 추가할 수 있도록 필드를 제공한다.

### 4.2 평가 파트
#### 4.2.1 평가 시트 수정
- 전/후륜 구분 필드 외에 **M-Code, 제조 정보, 가류 조건, 카빙/버핑 정보** 등 Spec을 식별할 수 있는 항목을 추가한다.
- Test Order ID와 Spec Code를 자동으로 연결하여 평가 시트에서의 식별을 용이하게 한다.

#### 4.2.2 Parsing 데이터 구조 조정
- 변경된 시트 구조에 맞춰 데이터 파싱 로직을 업데이트한다.
- 기본 입력 세트 수는 8개까지 지원하며, 필요 시 확장 가능한 구조를 설계한다.

### 4.3 결과 입력 파트
- 기존 시스템 프로세스를 유지하되, **다중 파일 업로드**와 **단일 워크북 다중 워크시트** 처리 여부를 검토한다.
- Test Order와 평가 결과 매칭 시, 취소된 Test Order가 중간 위치에 존재해도 데이터 불일치가 발생하지 않도록 **매핑 로직을 강화**한다.
  - 예: T4가 취소되어 T2 위치로 이동한 경우에도 Test Order ID 기반으로 결과를 연결.
- 취소된 Test Order는 명확히 표시하고, 결과 집계에서 제외할 수 있는 옵션을 제공한다.

## 5. 데이터 흐름 및 매칭 전략
1. **Spec 등록 단계**에서 생성된 Spec Code와 부가 정보는 중앙 DB에 저장된다.
2. **Test Order 생성 단계**에서 Test Order ID가 발급되고, Spec Code와 매핑된다.
3. **평가 시트**에는 Test Order ID와 Spec Code가 자동 삽입되어 평가 중 데이터 수집 시 실시간 매칭이 가능하다.
4. **결과 업로드** 시 파일 내 Test Order ID를 파싱하여 시스템에 저장된 정보와 매칭한다.
5. 취소 또는 변경 이력은 Audit Log로 관리하여 추후 빅데이터 분석 시 정확성을 유지한다.

## 6. 검토 사항 및 향후 과제
- 8 Set 이상 입력이 필요한 시나리오 조사 및 UI 확장 방안 마련.
- 제조 조건, 가류 조건 등 상세 속성 입력에 따른 데이터 모델 확장 검토.
- 평가 결과 시트에서 부분 취소된 정보를 자동으로 식별하고 제외하는 로직의 필요성 평가.
- 사용자 교육 및 가이드 문서 제공 계획 수립.

## 7. 기대 효과
- 의뢰 정보와 평가 결과 간의 불일치 감소로 인한 품질 데이터 신뢰도 향상.
- 조합평가 Test Order의 체계화로 평가 계획 수립 및 물량 산출 자동화에 유리.
- 의뢰 단계 오류 감소로 운영 효율성과 커뮤니케이션 품질 향상.

